<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	    <link rel="stylesheet" href="css/amazeui.min.css">
		<link rel="stylesheet" href="css/admin.css">
		<link rel="stylesheet" href="css/app.css">
		<style>
			.admin-main{
				padding-top: 0px;
			}
		</style>
	</head>
	<body>
		<div class="am-cf admin-main">
		<!-- content start -->
		<div class="admin-content">
			<div class="admin-content-body">
				<div class="am-g">
					<form class="am-form am-form-horizontal"
						  id="form" onsubmit="return false"
						  method="post"
						style="padding-top:30px;" data-am-validator>
						<div class="am-form-group">
							<label for="scheduledAdd" class="am-u-sm-3 am-form-label">
							定时器名称 </label>
							<div class="am-u-sm-9">
								<input type="text" id="scheduled-name" required placeholder="请输入定时器名称"
									name="cronName">
							</div>
						</div>
						<div class="am-form-group">
							<label for="scheduledAdd" class="am-u-sm-3 am-form-label">
								调用类 </label>
							<div class="am-u-sm-9">
								<input type="text" id="scheduled-class" required placeholder="请输入调用类"
									   name="cronClass">
							</div>
						</div>
						<div class="am-form-group">
							<label for="scheduledAdd" class="am-u-sm-3 am-form-label">
								调用方法 </label>
							<div class="am-u-sm-9">
								<input type="text" id="scheduled-method" required placeholder="请输入调用方法"
									   name="cronMethod">
							</div>
						</div>
						<div class="am-form-group">
							<label for="scheduledAdd" class="am-u-sm-3 am-form-label">
								调用参数 </label>
							<div class="am-u-sm-9">
								<input type="text" id="scheduled-params" required placeholder="请输入调用参数"
									   name="cronClassParams">
							</div>
						</div>
						<div class="am-form-group">
							<label for="scheduledAdd" class="am-u-sm-3 am-form-label">
								调用频率 </label>
							<div class="am-u-sm-9">
								<input type="text" id="scheduled-cron" required placeholder="请输入调用频率"
									   name="cron">
							</div>
						</div>
						<div class="am-form-group">
							<label for="scheduledAdd" class="am-u-sm-3 am-form-label">
								是否启动 </label>
							<div class="am-u-sm-9">
								<input type="radio" name="cronStatus" value="1" checked="checkeda" /> 是
								<input type="radio" name="cronStatus" value="0" /> 否
							</div>
						</div>
						<div class="am-form-group">
							<label for="scheduledAdd" class="am-u-sm-3 am-form-label">
								备注 </label>
							<div class="am-u-sm-9">
								<input type="text" id="scheduled-remark"  placeholder="备注可为空"
									   name="remark">
							</div>
						</div>
						<div class="am-form-group">
							<div class="am-u-sm-9 am-u-sm-push-3">
								<input onclick="scheduledSubmit()" type="submit" class="am-btn am-btn-success" value="确认提交" />
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<script src="js/jquery-3.1.0.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="myplugs/js/plugs.js">
	</script>
		<script type="text/javascript">
			function scheduledSubmit() {
				var fields = $('#form').serializeArray();
				var obj = {}; //声明一个对象
				$.each(fields, function(index, field) {
					obj[field.name] = field.value; //通过变量，将属性值，属性一起放到对象中
				})
				$.ajax({
					//几个参数需要注意一下ssss
					type: "POST",//方法类型
					dataType: "json",//预期服务器返回的数据类型
					url: "scheduled/insert" ,//url
					contentType: "application/json;",//这个必须设置（后台用@RequestBody）接参数
					data: JSON.stringify(obj),//将对象转为json字符串ssss
					success: function (result) {
						alert(result.msg);
						if (result.resultCode == 200) {
							window.location.href = "scheduledManagement.html";
						}
					},
					error : function() {
						alert("数据异常！");
					}
				});
			}
		</script>
	</body>
</html>
